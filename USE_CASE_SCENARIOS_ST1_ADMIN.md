# Use Case Scenarios - Clinic Administrator (ST1)

## Use Case 1: View Dashboard

| Field | Description |
|-------|-------------|
| **Use Case Name** | View Dashboard |
| **Actor** | Clinic Administrator (ST1) |
| **Description** | The administrator accesses the main admin dashboard interface with tabbed navigation (Products, Orders, Analytics, Owners, Appointments, Hotel) and views key metrics and statistics. |
| **Data** | Tab selection stored in localStorage, active tab state, dashboard metrics data (counts, statistics), user session information |
| **Stimulus** | Administrator navigates to `/admin/dashboard` or clicks on the admin dashboard link after login |
| **Response** | System displays the admin dashboard with the persisted tab selected (from localStorage if available, default to 'products'), shows analytics cards, and provides access to all management functions through tab navigation |
| **Comments** | Tab persistence is maintained across page refreshes using localStorage. Dashboard provides overview of system status and quick access to all administrative functions. |

---

## Use Case 2: View Analytics

| Field | Description |
|-------|-------------|
| **Use Case Name** | View Analytics |
| **Actor** | Clinic Administrator (ST1) |
| **Description** | The administrator views comprehensive business analytics including revenue reports, statistics, and tracking data through the Analytics tab and analytics cards on the dashboard. |
| **Data** | Analytics data (revenue, statistics, visitor counts, page views, product views), time period filter selection, session IDs, order data, appointment data, hotel reservation data |
| **Stimulus** | Administrator clicks on the "Analytics" tab in the dashboard or clicks on analytics cards (Orders, Appointments, Hotel Reservations) |
| **Response** | System displays analytics information including revenue breakdown (orders, appointments, hotel), statistics (total counts by status), unique visitors count, top products by views, page view counts, and product view counts. System allows filtering by time period (today, week, month, 3 months, year) |
| **Comments** | Analytics excludes admin pages from tracking. Revenue calculations only include completed orders, completed appointments with price, and checked-out hotel reservations with total. Clicking analytics cards opens modals with full lists instead of tab navigation. |

---

## Use Case 3: View Revenue Reports

| Field | Description |
|-------|-------------|
| **Use Case Name** | View Revenue Reports |
| **Actor** | Clinic Administrator (ST1) |
| **Description** | The administrator views detailed revenue reports showing breakdown by source (orders, appointments, hotel) with timeline and detailed breakdown in modal view. |
| **Data** | Revenue data from orders (completed only), appointments (completed with price), hotel reservations (checked-out with total), date range filters, payment method information |
| **Stimulus** | Administrator clicks on "Revenue Timeline" or revenue-related sections in the Analytics tab |
| **Response** | System displays revenue timeline showing all revenue items (orders, appointments, hotel) with detailed breakdown in a modal. System shows payment breakdown for hotel reservations (nights, room rate, subtotal, pickup fee, dropoff fee, extra services with amounts, total). System allows filtering by time period |
| **Comments** | Pending orders are excluded from revenue calculations. Revenue is calculated separately for orders, appointments, and hotel, with total combined revenue displayed. |

---

## Use Case 4: Create Product

| Field | Description |
|-------|-------------|
| **Use Case Name** | Create Product |
| **Actor** | Clinic Administrator (ST1) |
| **Description** | The administrator creates a new product with name, description, price, images, stock quantity, and category assignment. The system auto-generates a product slug from the name. |
| **Data** | Product name, description, price (numeric), images (multiple files), stock quantity (integer), category selection, product slug (auto-generated) |
| **Stimulus** | Administrator navigates to product creation page, fills in product details form, uploads images, and clicks "Create Product" or "Save" button |
| **Response** | System validates input data, uploads images to Cloudinary, auto-generates slug from product name, creates product record in database, stores image URLs as comma-separated string, displays success message, and redirects to products list or refreshes product list |
| **Comments** | Images are uploaded to Cloudinary with validation for file type (JPEG, JPG, PNG, WebP, GIF) and file size (max 5MB). Slug is generated by converting product name to lowercase and replacing spaces with hyphens. Product stock is initialized with the provided quantity. |

---

## Use Case 5: Update Product

| Field | Description |
|-------|-------------|
| **Use Case Name** | Update Product |
| **Actor** | Clinic Administrator (ST1) |
| **Description** | The administrator updates an existing product's information including name, description, price, images, stock quantity, and category. If name changes, the slug is regenerated. |
| **Data** | Product ID, updated product name, description, price, images (new or existing), stock quantity, category, old product name (for slug comparison) |
| **Stimulus** | Administrator selects a product to edit, modifies product details in the edit form, optionally uploads new images, and clicks "Update Product" or "Save Changes" button |
| **Response** | System validates input data, checks if product name changed, regenerates slug if name changed, uploads new images to Cloudinary if provided, updates product record in database, updates image URLs, displays success message, and refreshes product information in the UI |
| **Comments** | Product ID cannot be changed. If new images are uploaded, old images can be replaced or added to existing ones. Slug regeneration ensures URLs remain consistent. Stock quantity can be updated to reflect inventory changes. |

---

## Use Case 6: Delete Product

| Field | Description |
|-------|-------------|
| **Use Case Name** | Delete Product |
| **Actor** | Clinic Administrator (ST1) |
| **Description** | The administrator deletes a product from the system after confirmation. The product and its associated data are permanently removed. |
| **Data** | Product ID, product name (for confirmation display) |
| **Stimulus** | Administrator clicks "Delete" button for a product, confirms deletion in the confirmation dialog |
| **Response** | System displays confirmation dialog with product name, waits for confirmation, deletes product record from database, removes product from product list, displays success message, and refreshes product list view |
| **Comments** | Deletion should be confirmed to prevent accidental removal. Products that are referenced in orders should be handled appropriately (either prevented from deletion or marked as deleted while preserving order history). |

---

## Use Case 7: Manage Orders

| Field | Description |
|-------|-------------|
| **Use Case Name** | Manage Orders |
| **Actor** | Clinic Administrator (ST1) |
| **Description** | The administrator views all orders with pagination, filtering, and manages order status and details through the Orders tab in the dashboard. |
| **Data** | Orders list, pagination settings (50 per page), status filter (pending/completed/cancelled), date range filter, order details (items, customer, address, payment method) |
| **Stimulus** | Administrator clicks on the "Orders" tab in the dashboard, applies filters (status, date range), selects an order to view details |
| **Response** | System displays paginated list of orders (50 per page), allows filtering by status and date range, shows order details in modal (customer information, order items, delivery method, payment method, order timeline), and provides options to update order status and add notes |
| **Comments** | Orders are displayed with pagination for performance. Order status changes trigger stock management (restore stock if cancelled, decrement if reactivated). Order timeline shows status changes and timestamps. |

---

## Use Case 8: Update Order Status

| Field | Description |
|-------|-------------|
| **Use Case Name** | Update Order Status |
| **Actor** | Clinic Administrator (ST1) |
| **Description** | The administrator updates the status of an order (pending, completed, cancelled) and optionally adds notes. Stock quantities are adjusted based on status changes. |
| **Data** | Order ID, new status (pending/completed/cancelled), optional notes, current order status, order items with quantities |
| **Stimulus** | Administrator selects an order, changes the status dropdown, optionally adds notes, and clicks "Update Status" or "Save Changes" button |
| **Response** | System validates status change, updates order status in database, adds notes if provided, adjusts product stock (restores stock if status changed to cancelled, decrements stock if status changed from cancelled to active), updates order timeline, displays success message, and refreshes order list |
| **Comments** | Stock management is critical: cancelled orders restore product stock, and reactivated orders decrease stock again. Order notes are stored for record-keeping and customer communication. |

---

## Use Case 9: Create User Account

| Field | Description |
|-------|-------------|
| **Use Case Name** | Create User Account |
| **Actor** | Clinic Administrator (ST1) |
| **Description** | The administrator creates a new user account with name, email, phone, password, governorate, area, and address. This allows creating accounts for customers who don't register themselves. |
| **Data** | User name, email, phone number, password (hashed with bcrypt), governorate, area, address, user role (default: 'user') |
| **Stimulus** | Administrator navigates to Owners tab, clicks "Create User" or "Add New User" button, fills in user details form, and clicks "Create Account" or "Save" button |
| **Response** | System validates input data (email format, password strength), hashes password with bcrypt (12 rounds), creates user record in database, displays success message, adds new user to users list, and refreshes users list view |
| **Comments** | Password must meet strength requirements (min 8 chars, uppercase, lowercase, number). Email must be unique. Created accounts can later be upgraded to full accounts by users if needed. Phone-based accounts can be upgraded by users. |

---

## Use Case 10: Update User Information

| Field | Description |
|-------|-------------|
| **Use Case Name** | Update User Information |
| **Actor** | Clinic Administrator (ST1) |
| **Description** | The administrator updates a user's profile information including name, phone, governorate, area, and address. |
| **Data** | User ID, updated name, phone number, governorate, area, address, existing user data |
| **Stimulus** | Administrator selects a user from the users list, clicks "Edit" button, modifies user information in the edit form, and clicks "Update User" or "Save Changes" button |
| **Response** | System validates input data, updates user record in database, displays success message, refreshes user information in the UI, and updates user details in any related views |
| **Comments** | Email and password updates may require separate flows for security reasons. Address information is used for order delivery and appointment records. |

---

## Use Case 11: Delete User

| Field | Description |
|-------|-------------|
| **Use Case Name** | Delete User |
| **Actor** | Clinic Administrator (ST1) |
| **Description** | The administrator deletes a user account with cascade deletion of related data including pets, orders, and appointments. |
| **Data** | User ID, user name (for confirmation display), related data (pets, orders, appointments) |
| **Stimulus** | Administrator selects a user, clicks "Delete" button, confirms deletion in the confirmation dialog |
| **Response** | System displays confirmation dialog with user name, waits for confirmation, performs cascade deletion (removes user, pets, orders, appointments, medical records), removes user from users list, displays success message, and refreshes users list view |
| **Comments** | Cascade deletion ensures data integrity. Deletion should be confirmed to prevent accidental removal. Consider soft delete or archival for important historical data. Admin users cannot be deleted through this interface. |

---

## Use Case 12: Create Appointment

| Field | Description |
|-------|-------------|
| **Use Case Name** | Create Appointment |
| **Actor** | Clinic Administrator (ST1) |
| **Description** | The administrator creates an appointment for any customer by selecting or entering owner name, phone, pet name, appointment date, time, reason, and optional notes. |
| **Data** | Owner name, owner phone, pet ID (if user's pet) or pet name, appointment date, appointment time, reason, optional notes, user ID (if registered user) |
| **Stimulus** | Administrator navigates to Appointments tab, clicks "Create Appointment" or "New Appointment" button, fills in appointment details form, and clicks "Create Appointment" or "Save" button |
| **Response** | System validates input data, checks date/time availability if applicable, creates appointment record with status "upcoming", associates with user if user ID provided, displays success message, adds appointment to appointments list, and refreshes appointments view |
| **Comments** | Appointments can be created for both registered users (with user ID and pet ID) and guest users (with owner name, phone, and pet name). Appointment status is set to "upcoming" by default. |

---

## Use Case 13: Complete Appointment

| Field | Description |
|-------|-------------|
| **Use Case Name** | Complete Appointment |
| **Actor** | Clinic Administrator (ST1) |
| **Description** | The administrator marks an appointment as completed by setting completion price, payment method, and updating status to "completed". |
| **Data** | Appointment ID, completion price (numeric), payment method (cash/click/other), current appointment status |
| **Stimulus** | Administrator selects an appointment, clicks "Complete Appointment" button, enters completion price and payment method, and clicks "Mark as Completed" or "Save" button |
| **Response** | System validates input data, updates appointment status to "completed", records completion price and payment method, updates appointment timestamp, displays success message, refreshes appointment in the list with completed status (green color coding), and includes appointment in revenue calculations |
| **Comments** | Completed appointments with price are included in revenue analytics. Payment method is recorded for financial reporting. Appointment cannot be edited after completion (may require separate workflow for corrections). |

---

## Use Case 14: Cancel Appointment

| Field | Description |
|-------|-------------|
| **Use Case Name** | Cancel Appointment |
| **Actor** | Clinic Administrator (ST1) |
| **Description** | The administrator cancels an appointment by updating its status to "cancelled". |
| **Data** | Appointment ID, current appointment status, optional cancellation reason |
| **Stimulus** | Administrator selects an appointment, clicks "Cancel Appointment" button, optionally enters cancellation reason, and confirms cancellation |
| **Response** | System updates appointment status to "cancelled", records cancellation timestamp, optionally saves cancellation reason, displays success message, refreshes appointment in the list with cancelled status (red color coding), and excludes appointment from upcoming appointments |
| **Comments** | Cancelled appointments are excluded from revenue calculations. Cancellation reason can be stored for record-keeping. Users can be notified of cancellation if needed. |

---

## Use Case 15: Manage Hotel Rooms

| Field | Description |
|-------|-------------|
| **Use Case Name** | Manage Hotel Rooms |
| **Actor** | Clinic Administrator (ST1) |
| **Description** | The administrator views and manages hotel rooms by type (DOG, CAT, BIRD) on separate pages, with all reservations displayed for each room. |
| **Data** | Hotel rooms list, room type filter (DOG/CAT/BIRD), room status (AVAILABLE/OCCUPIED/CLEANING/MAINTENANCE), room number, reservations for each room |
| **Stimulus** | Administrator clicks on the "Hotel" tab in the dashboard, selects room type filter (dogs, cats, birds), views rooms list |
| **Response** | System displays hotel rooms by selected type, shows room number and status for each room, displays all reservations for each room, allows creating new rooms, updating room status, and managing reservations |
| **Comments** | Rooms are organized by type for easier management. Each room shows its current status and associated reservations. Room status affects availability for new bookings. |

---

## Use Case 16: Create Hotel Reservation

| Field | Description |
|-------|-------------|
| **Use Case Name** | Create Hotel Reservation |
| **Actor** | Clinic Administrator (ST1) |
| **Description** | The administrator creates a hotel reservation for any customer with owner name, phone, pet name, room selection, check-in date, check-out date, pickup/dropoff service options, and optional notes. |
| **Data** | Room ID, owner name, owner phone, pet name, check-in date, check-out date, pickup service (boolean), dropoff service (boolean), extra services (array of service names), optional notes, user ID (if registered user) |
| **Stimulus** | Administrator navigates to Hotel tab, selects a room or clicks "Create Reservation" button, fills in reservation details form, and clicks "Create Reservation" or "Save" button |
| **Response** | System validates input data, checks room availability for selected dates, creates reservation record with status "booked", marks room as "OCCUPIED", calculates booking cost breakdown, displays success message, adds reservation to reservations list, and refreshes hotel rooms view |
| **Comments** | Room availability is checked to prevent overlapping reservations. Room status is immediately updated to OCCUPIED. Extra services are added by name only; amounts are set by admin at checkout. Reservation status is set to "booked" initially. |

---

## Use Case 17: Checkout Reservation

| Field | Description |
|-------|-------------|
| **Use Case Name** | Checkout Reservation |
| **Actor** | Clinic Administrator (ST1) |
| **Description** | The administrator completes a hotel reservation checkout by calculating total nights, setting room rate, subtotal, pickup fee, dropoff fee, setting extra service amounts, calculating total, selecting payment method, updating status to "checked_out", and marking room as "AVAILABLE". |
| **Data** | Reservation ID, check-in date, check-out date, room rate (default: 20 JOD/night), pickup fee (default: 5 JOD if selected), dropoff fee (default: 5 JOD if selected), extra services with amounts, payment method, current reservation status |
| **Stimulus** | Administrator selects a reservation, clicks "Checkout" button, reviews cost breakdown, sets extra service amounts, selects payment method, and clicks "Complete Checkout" or "Save" button |
| **Response** | System calculates total nights, calculates subtotal (nights Ã— room rate), adds pickup fee if applicable, adds dropoff fee if applicable, adds extra service amounts, calculates total, updates reservation status to "checked_out", records payment method, marks room as "AVAILABLE", records checkout timestamp, displays success message, refreshes reservation details, and includes reservation in revenue calculations |
| **Comments** | Checkout process completes the reservation lifecycle. Room becomes available for new bookings. Total calculation includes all fees and services. Checked-out reservations with total are included in revenue analytics. |

---

## Use Case 18: Manage Pet Profiles

| Field | Description |
|-------|-------------|
| **Use Case Name** | Manage Pet Profiles |
| **Actor** | Clinic Administrator (ST1) |
| **Description** | The administrator views and manages any pet profile, including viewing details, editing information, and performing administrative actions on pets belonging to any user. |
| **Data** | Pet ID, pet information (name, species, breed, gender, birth date, color, photo), pet owner user ID, medical records data |
| **Stimulus** | Administrator navigates to user details, selects a pet, or accesses pet management through Owners tab, views pet profile |
| **Response** | System displays pet profile with all information, shows medical records (vaccinations, dewormings, clinic visits, weight history), provides options to edit pet information, add medical records, and delete pet, displays pet code (PET-XXXXX format) |
| **Comments** | Admin has full access to manage any pet profile in the system. This is useful for correcting information, adding medical records after appointments, or managing data for clinic operations. Pet deletion cascades to related medical records. |

---

## Use Case 19: Add Medical Records

| Field | Description |
|-------|-------------|
| **Use Case Name** | Add Medical Records |
| **Actor** | Clinic Administrator (ST1) |
| **Description** | The administrator adds medical records to any pet profile including vaccinations, dewormings, clinic visits, and weight records with appropriate details. |
| **Data** | Pet ID, record type (vaccination/deworming/clinic visit/weight), record details (name, date, next due date, notes for vaccinations/dewormings; visit date, reason, diagnosis, treatment, prescriptions, notes, next appointment for visits; date, weight, notes for weight) |
| **Stimulus** | Administrator selects a pet profile, clicks "Add Vaccination", "Add Deworming", "Add Clinic Visit", or "Add Weight Record" button, fills in record details form, and clicks "Add Record" or "Save" button |
| **Response** | System validates input data, creates medical record in database, associates record with pet, displays success message, adds record to pet's medical history, refreshes medical records display (most recent first), and updates pet profile view |
| **Comments** | Medical records are added chronologically and displayed with most recent first. Records are linked to the pet and user for tracking. Clinic visits can include comprehensive information about diagnosis and treatment. Next due dates help track future care needs. |

